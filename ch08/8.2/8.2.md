# Exercises for Section 8.2### 8.2.1
Generate code for the following three-address statements as­ suming all variables are stored in memory locations.
1. x = 12. x = a3. x = a + 14. x = a + b5. The two statements    - x = b * c    - y = a + x#### answer
    1.  LD R1, 1
        ST x, R1
    2.  LD R1, a
        ST x, R1    3.  LD R1, a        ADD R1, R1, 1        ST x, R1    4.  LD R1, a        LD R2, b        ADD R1, R1, R2        ST x, R1    5.  LD R1, b        LD R2, c        MUL R1, R1, R2        LD R3, a        ADD R3, R3, R1        ST y, R3疑问1：↑第5小题，为第二句三地址码生成汇编码的时候，因为 x 的值已经在寄存器中，所以不需要 LD，但为第一句三地址码生成汇编码的时候，需要生成 `ST x, R1` 么？### 8.2.2
Generate code for the following three-address statements as­ suming a and b are arrays whose elements are 4-byte values.
1. The four-statement sequence        x = a[i]        y = b[j]        a[i] = y
        b[j] = x2. The three-statement sequence        x = a[i]
        y = b[i]
        z = x * y
3. The three-statement sequence        x = a[i]
        y = b[x]
        a[i] = y#### answer
    1.  LD R1, i        MUL R1, R1, 4        LD R2, a(R1)        LD R3, j        MUL R3, R3, 4        LD R4, b(R3)        ST a(R1), R4        ST b(R3), R2    2.  LD R1, i        MUL R1, R1, 4        LD R2, a(R1)        LD R3, b(R1)        MUL R2, R2, R3        ST z, R2    3.  LD R1, i        MUL R1, R1, 4        LD R2, a(R1)        LD R3, b(R2)        ST a(R1), R3

### 8.2.3

Generate code for the following three-address sequence as­ suming that p and q are in memory locations:

    y = *q    q = q + 4    *p = y    p = p + 4#### answer    LD R1, q    LD R2, 0(R1)    ADD R1, R1, 4    LD R3, p    ST 0(R3), R1    ADD R3, R3, 4    ST p, R3疑问2：↑后两句三地址码的翻译靠谱嘛？### 8.2.4
Generate code for the following sequence assuming that x, y, and z are in memory locations:        if x < Y goto L1        z = 0        goto L2    L1: z = 1#### answer    LD R1, x    LD R2, y    SUB R1, R1, R2    BLTZ R1, M    LD z, 0    ? goto    ? label L1疑问3：↑根据 p515 最上面关于条件跳转的示范代码，L 和 M 是怎么对应起来的？`goto L2` 这样的非条件跳转和 `L1: z=1` 这样带标签的语句如何翻译？### 8.2.5
Generate code for the following sequence assuming hat n is in a memory location:        s = 0        i = 0    L1: if i > n goto L2        s = s + i        i = i + 1        goto L1    L2:#### answer    LD R1, 0    LD R2, R1    ? label L1    ? where is n come from    ADD R1, R1, R2    ADD R2, R2, 1    ? goto    ? label L2### 8.2.6
Determine the costs of the following instruction sequences:
    1.  LD R0, Y        LD R1, z        ADD R0, R0, R1
        ST x, R0    2.  LD R0, i        MUL R0, R0, 8        LD R1, a(R0)        ST b, R1    3.  LD R0, c        LD R1, i        MUL R1, R1, 8        ST a(R1),R0    4.  LD R0, p        LD R1, 0(R0)        ST x, R1    5.  LD R0, p
        LD R1, x        ST 0(R0), R1    6.  LD R0, x
        LD R1, y        SUB R0, R0, R1
        BLTZ *R3, R0#### answer1. 2 + 2 + 1 + 2 = 72. 2 + 2 + 2 + 2 = 83. 2 + 2 + 2 + 2 = 84. 2 + 2 + 2 = 65. 2 + 2 + 2 = 66. 2 + 2 + 1 + 1 = 6疑问4：以下是我不太拿的准的语句，后面附上我认为的代价1. ST x, R0 - 22. LD R1, a(R0) - 2（a涉及内存位置，所以附加代价为 1？）3. ST a(R1),R0 - 24. BLTZ *R3, R0 - 1---## 其他疑问注：以下所有页码均为英文版页码#### 5. 整数常量寻址p513 后半页提到 ADD R1, R1, #100 代表将整数 100 加到 R1p514 中，三地址码 b = a[i] 生成的汇编码是    LD R1, i    MUL R1, R1, 8    ...问题是：1. 为什么 8 前面不需要加 # ？2. 三地址码 x = 1 生成的代码是 LD R1, #1 还是 LD R1, 1 呢？#### 6. 寄存器    LD R1, a    LD R2, b    ADD R1, R1, R2    ST x, R1如上面代码所示，Ri 表示第 i 号寄存器。1. 在翻译成汇编码的过程中，是可以随意指定 i 的值（比如 R3, R4, R1000）呢还是会有某种限制？2. 另外，如果代码中所示的 R1 在后面的代码中用不着了，那么新的值是不是可以被加载到 R1 中？如果可以的话，如何知道之前的 R1 用不着了？#### 7. 读取数组元素p514 的例子：b = a[i]    LD R1, i    MUL R1, R1, 8    LD R2, a(R1)    ...其中 a 不需要 LD 到寄存器先？